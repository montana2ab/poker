# Vision Performance Configuration
# Controls caching and optimization features to reduce parse latency

vision_performance:
  # Enable/disable all caching features
  enable_caching: true
  
  # Enable/disable light parse mode (skip heavy OCR on some frames)
  enable_light_parse: true
  
  # Interval for full parse (1 = every frame, 3 = every 3rd frame)
  light_parse_interval: 3
  
  # Enable hash-based ROI caching for OCR (pot, stacks, bets)
  cache_roi_hash: true
  
  # Enable amount cache (stacks, bets, pot) with change detection
  # When enabled, OCR is skipped if image hash hasn't changed
  enable_amount_cache: true
  
  # Downscale large ROIs before OCR to reduce processing time
  downscale_ocr_rois: true
  
  # Maximum dimension for OCR ROIs (larger images will be downscaled)
  max_roi_dimension: 400
  
  # Board card caching settings
  board_cache:
    enabled: true
    # Require N consecutive frames with same cards to mark as stable
    stability_threshold: 2
  
  # Hero card caching settings
  hero_cache:
    enabled: true
    # Require N consecutive frames with same cards to mark as stable
    stability_threshold: 2
  
  # Chat parsing frequency (0 = disable, 1 = every frame, N = every Nth frame)
  chat_parse_interval: 3
  
  # Table detection / homography settings
  detect_table:
    # Enable/disable homography transformation
    # When disabled, uses raw screenshot coordinates directly (faster but requires fixed table position)
    # When enabled, applies perspective correction (slower but adapts to table movements)
    enable_homography: true
    
    # Number of recent parses to check for valid data when homography is disabled
    # If no valid stacks/pot detected in this window, logs a warning
    health_check_window: 20
  
  # Visual button detection configuration
  # Detects dealer button position using color-based detection on button_region patches
  vision_button_detection:
    # Detection mode:
    # - "logical_only": Use only SB/BB logic (existing behavior)
    # - "visual_only": Use only visual color detection (for testing)
    # - "hybrid": Try logical first, fallback to visual (recommended)
    # - "off": Disable button detection entirely
    mode: "hybrid"
    
    # Minimum number of consecutive frames with same button position to stabilize
    # Higher values reduce false positives but add latency
    min_stable_frames: 2
