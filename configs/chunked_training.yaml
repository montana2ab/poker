# Chunked Training Configuration
# This configuration demonstrates chunked training mode

# Total training goal
num_iterations: 1000000  # 1M iterations total

# Chunked training mode
enable_chunked_training: true
chunk_size_iterations: 100000  # 100k iterations per chunk (10 chunks total)

# Optional: Also limit chunk duration
# chunk_size_minutes: 60.0  # End chunk after 60 minutes even if iteration target not reached

# Checkpoints within each chunk
checkpoint_interval: 25000  # Save checkpoint every 25k iterations

# Linear MCCFR parameters
use_linear_weighting: true
discount_interval: 1000  # Apply DCFR discounting every 1k iterations

# DCFR mode (adaptive discounting)
discount_mode: "dcfr"  # Options: "none", "static", "dcfr"
dcfr_reset_negative_regrets: true  # CFR+ behavior

# Static discount factors (only used if discount_mode: "static")
regret_discount_alpha: 1.0
strategy_discount_beta: 1.0

# Exploration
exploration_epsilon: 0.6

# Dynamic pruning (Pluribus paper values)
enable_pruning: true
pruning_threshold: -300000000.0
pruning_probability: 0.95

# TensorBoard logging
tensorboard_log_interval: 1000  # Log metrics every 1k iterations

# Preflop equity optimization (0 to disable during training)
preflop_equity_samples: 100

# Notes:
# - Process will exit after each chunk to free memory
# - Simply run the same command again to continue from checkpoint
# - All state (RNG, epsilon, regrets, etc.) is preserved across chunks
# - TensorBoard logs are continuous across chunks

# Example usage:
# ./bin/holdem-train-blueprint \
#   --config configs/chunked_training.yaml \
#   --buckets data/buckets.pkl \
#   --logdir runs/my_chunked_training
#
# Run this command multiple times to complete all chunks.
# Each run will automatically resume from the last checkpoint.

# Alternative configurations:

# Time-based chunks (for time-budget training):
# time_budget_seconds: 691200  # 8 days
# chunk_size_minutes: 60.0  # 1 hour per chunk
# snapshot_interval_seconds: 900  # 15 minute snapshots within chunks

# Hybrid chunks (iteration OR time, whichever first):
# num_iterations: 2000000
# time_budget_seconds: 172800  # 48 hours
# chunk_size_iterations: 50000
# chunk_size_minutes: 30.0
